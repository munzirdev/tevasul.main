# ุญู ูุดููุฉ ุงูุชูุงุก ุตูุงุญูุฉ ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

## ๐จ ุงููุดููุฉ ุงูููุชุดูุฉ

ุชู ุงูุชุดุงู ุฃู ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ูู Supabase ููุชูู ุตูุงุญูุชู ุจุณุฑุนุฉุ ููุง ูุคุฏู ุฅูู ุธููุฑ ุงูุฎุทุฃ:
```
error=access_denied&error_code=otp_expired&error_description=Email+link+is+invalid+or+has+expired
```

## ๐ ุชุญููู ุงููุดููุฉ

### ุฃุณุจุงุจ ุงูุชูุงุก ุงูุตูุงุญูุฉ:
1. **ูุฏุฉ ุตูุงุญูุฉ ูุตูุฑุฉ**: ุฑูุงุจุท Supabase ุชูุชูู ุตูุงุญูุชูุง ุฎูุงู 1-24 ุณุงุนุฉ
2. **ูุณุฎ ุฌุฒุฆู ููุฑุงุจุท**: ุนูุฏ ูุณุฎ ุงูุฑุงุจุท ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
3. **ุชุฃุฎูุฑ ูู ุงูุงุณุชุฎุฏุงู**: ุงูุชุธุงุฑ ุทููู ูุจู ุงูุถุบุท ุนูู ุงูุฑุงุจุท
4. **ูุดุงูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: ูุตูู ุงูุฑุงุจุท ุฅูู ูุฌูุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงููุฑุบูุจ ูููุง

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฎุงุตุฉ ูุฎุทุฃ `otp_expired`
- โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ูุฎุทุฃ `access_denied`
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ ุจุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ูุตุงุฆุญ ูุญู ุงููุดููุฉ

### 2. ุชุญุณูู ุฅุนุฏุงุฏุงุช Supabase
- โ ุฅุถุงูุฉ `flowType: 'pkce'` ูุชุญุณูู ุงูุฃูุงู
- โ ุฅุถุงูุฉ ูุถุน ุงูุชุตุญูุญ ููุชุทููุฑ
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฌูุณุงุช

### 3. ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- โ ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ ูุน ูุตุงุฆุญ
- โ ุชูุฌููุงุช ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ ุฑูุงุจุท ุณุฑูุนุฉ ููุนูุฏุฉ ุฅูู ุชุณุฌูู ุงูุฏุฎูู

## ๐ง ุงูููุฏ ุงููุญุณู

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ResetPasswordPage.tsx:
```typescript
// Handle error cases first
if (error || errorCode) {
  let errorMessage = '';
  if (errorCode === 'otp_expired') {
    errorMessage = isArabic 
      ? 'ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ููุชูู ุงูุตูุงุญูุฉ. ูุฑุฌู ุทูุจ ุฑุงุจุท ุฌุฏูุฏ.'
      : 'Password reset link has expired. Please request a new link.';
  } else if (error === 'access_denied') {
    errorMessage = isArabic 
      ? 'ุชู ุฑูุถ ุงููุตูู. ูุฑุฌู ุทูุจ ุฑุงุจุท ุฌุฏูุฏ ูุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ.'
      : 'Access denied. Please request a new password reset link.';
  }
  setError(errorMessage);
  setIsValidToken(false);
  return;
}
```

### ุฅุนุฏุงุฏุงุช Supabase ุงููุญุณูุฉ:
```typescript
supabaseClient = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: true,
    flowType: 'pkce',
    debug: process.env.NODE_ENV === 'development'
  }
});
```

## ๐ ูุตุงุฆุญ ูููุณุชุฎุฏููู

### ูุชุฌูุจ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุงุจุท:
1. **ุงุถุบุท ุนูู ุงูุฑุงุจุท ููุฑุงู**: ูุง ุชูุชุธุฑ ุทูููุงู ุจุนุฏ ุงุณุชูุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
2. **ุชุญูู ูู ูุฌูุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงููุฑุบูุจ ูููุง**: ูุฏ ูุตู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุงู
3. **ุงูุณุฎ ุงูุฑุงุจุท ูุงููุงู**: ุชุฃูุฏ ูู ูุณุฎ ุงูุฑุงุจุท ุจุงููุงูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
4. **ุงุณุชุฎุฏู ุงูุฑุงุจุท ูุฑุฉ ูุงุญุฏุฉ**: ูุง ุชุญุงูู ุงุณุชุฎุฏุงู ููุณ ุงูุฑุงุจุท ูุฑุงุช ูุชุนุฏุฏุฉ

### ุฅุฐุง ุงูุชูุช ุตูุงุญูุฉ ุงูุฑุงุจุท:
1. **ุงุทูุจ ุฑุงุจุทุงู ุฌุฏูุฏุงู**: ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
2. **ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: ูุฏ ูููู ูู ูุฌูุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงููุฑุบูุจ ูููุง
3. **ุชุฃูุฏ ูู ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: ุชุฃูุฏ ูู ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูุตุญูุญ

## ๐๏ธ ุฅุนุฏุงุฏุงุช Supabase ุงููุทููุจุฉ

### ูู ููุญุฉ ุชุญูู Supabase:
1. **Auth Settings > URL Configuration**:
   - Site URL: `https://tevasul.group`
   - Redirect URLs: `https://tevasul.group/reset-password`

2. **Auth Settings > Email Templates**:
   - ุชุฃูุฏ ูู ุฃู ูุงูุจ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ุตุญูุญ
   - ุชุญูู ูู ุฅุนุฏุงุฏุงุช SMTP

3. **Auth Settings > Security**:
   - ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช JWT
   - ุชุญูู ูู ูุฏุฉ ุตูุงุญูุฉ Tokens

## ๐ ุฑูุงุจุท ูููุฏุฉ

### ุตูุญุฉ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ:
```
https://tevasul.group/reset-password
```

### ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู:
```
https://tevasul.group/login
```

### ุตูุญุฉ ุงูุงุฎุชุจุงุฑ:
```
https://tevasul.group/test-email-link.html
```

## ๐ ุงูุฏุนู

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
1. **ุชุญูู ูู ุณุฌูุงุช ูุญุฏุฉ ุงูุชุญูู** (F12)
2. **ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช Supabase**
3. **ุงุฎุชุจุฑ ูุน ุจุฑูุฏ ุฅููุชุฑููู ูุฎุชูู**
4. **ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ**

### ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุดุงุฆุนุฉ:
- `otp_expired`: ุงูุฑุงุจุท ููุชูู ุงูุตูุงุญูุฉ
- `access_denied`: ุชู ุฑูุถ ุงููุตูู
- `invalid_token`: ุงูุฑุงุจุท ุบูุฑ ุตุงูุญ

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุชุญุณููุงุช:
- โ ูุนุงูุฌุฉ ุดุงููุฉ ูุฃุฎุทุงุก ุงูุชูุงุก ุงูุตูุงุญูุฉ
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ
- โ ูุตุงุฆุญ ูุญู ุงููุดููุฉ
- โ ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- โ ุฅุนุฏุงุฏุงุช Supabase ูุญุณูุฉ

**ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุนุงูุฌุฉ ูุดุงูู ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุงุจุท ุจุดูู ุฃูุถู! ๐**
