# ูุธุงู ุงูุชูุงุตู ุจูู ุงููุดุฑู ูุงูุนููู ุนุจุฑ ุชููุฌุฑุงู - โ ููุชูู

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ูุธุงู ุงูุฒุฑ ูู ุชููุฌุฑุงู โ
- โ ุฒุฑ "๐ฌ ุงูุฑุฏ ุนูู ุงูุนููู" ูู ุฅุดุนุงุฑุงุช ุชููุฌุฑุงู
- โ ูุนุงูุฌุฉ Callback ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ
- โ ุฅูุดุงุก ุฌูุณุฉ ูุญุงุฏุซุฉ ูุดุทุฉ
- โ **ูุญุงุฏุซุฉ ูุธููุฉ ุจุฏูู ุฑุณุงุฆู ุชุฃููุฏ** (ูุง ุชูุฌุฏ ุฑุณุงุฆู ูู ุงูุจูุช)

### 2. ูุธุงู ุฑุณุงุฆู ุงููุดุฑู โ
- โ ุฅุฑุณุงู ุฑุณุงุฆู ูู ุงููุดุฑู ูู ุชููุฌุฑุงู
- โ ุญูุธ ุงูุฑุณุงุฆู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุนุฑุถ ุงูุฑุณุงุฆู ููุนููู ุนูู ุงููููุน

### 3. ูุธุงู ุฅููุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู โ
- โ ุงูุชุญูู ูู ูุฌูุฏ ุฌูุณุฉ ูุญุงุฏุซุฉ ูุดุทุฉ
- โ ุฅููุงู ุฑุฏูุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุฃุซูุงุก ุงููุญุงุฏุซุฉ ุงููุดุทุฉ
- โ Periodic check ููุชุฃูุฏ ูู ุญุงูุฉ ุงูุฌูุณุฉ

### 4. ูุธุงู ุฅุดุนุงุฑุงุช ุชููุฌุฑุงู โ
- โ Trigger ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ
- โ ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ูุตูู ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู ุงูุนููู

### 5. ูุธุงู ุชูุจูู ุงูุนููู โ
- โ ุชูุจูู ุงูุนููู ุนูุฏ ุงุณุชูุงู ุงููุญุงุฏุซุฉ ูู ุงููุดุฑู
- โ ุชุนุทูู ุฒุฑ "ุทูุจ ููุซู ุฎุฏูุฉ ุนููุงุก" ุจุนุฏ ุงูุทูุจ
- โ ุนุฑุถ ุฑุณุงูุฉ "ุชู ุงูุทูุจ - ุฌุงุฑู ุงูุงูุชุธุงุฑ"

## ๐จ ุงููุญุงุฏุซุฉ ุงููุธููุฉ

### ูุง ุชู ุญุฐูู:
- โ "โ ุชู ุฅุฑุณุงู ุฑุฏู ุฅูู ุงูุนููู"
- โ "โ ุชู ุชูุนูู ุงููุญุงุฏุซุฉ ุจูุฌุงุญ"
- โ "๐ ุขุฎุฑ 5 ุฑุณุงุฆู"
- โ "ุฌุงุฑู ุงููุนุงูุฌุฉ..."

### ุงููุชูุฌุฉ:
- โ ููุท ุฑุณุงุฆู ุงููุดุฑู
- โ ููุท ุฑุณุงุฆู ุงูุนููู
- โ ูุญุงุฏุซุฉ ูุธููุฉ ุชูุงูุงู

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ

### 1. ุชุดุบูู Migration
ูู Supabase SQL Editor:
```sql
-- ูุณุฎ ูุญุชูู ููู
supabase/migrations/20250126_add_telegram_notification_trigger.sql

-- ูุชุดุบููู ูู SQL Editor
```

### 2. ุชูุนูู HTTP Extension
```sql
CREATE EXTENSION IF NOT EXISTS http;
```

### 3. ุงูุชุญูู ูู Webhook URL
```powershell
$botToken = "YOUR_BOT_TOKEN"
Invoke-RestMethod -Uri "https://api.telegram.org/bot$botToken/getWebhookInfo"
```

ูุฌุจ ุฃู ูููู URL:
```
https://fctvityawavmuethxxix.supabase.co/functions/v1/telegram-bot-updates
```

### 4. ุชูุนูู Public Access ููู Edge Function
ูู Supabase Dashboard:
- Edge Functions โ telegram-bot-updates โ Settings
- ูุนูู "Public Access" ุฃู "No Authentication Required"

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุงูุฒุฑ
1. ุงุทูุจ ููุซู ุฎุฏูุฉ ุนููุงุก ูู ุงููููุน
2. ุงุถุบุท ุนูู ุฒุฑ "๐ฌ ุงูุฑุฏ ุนูู ุงูุนููู" ูู ุชููุฌุฑุงู
3. **ูุง ุชูุฌุฏ ุฑุณุงูุฉ ุชุฃููุฏ** - ุงูุฒุฑ ููุท ูุชู ุชูุนููู

### 2. ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฑุณุงูุฉ ููุนููู
1. ุฃูุชุจ ุฑุณุงูุฉ ูู ุชููุฌุฑุงู ุจุนุฏ ุชูุนูู ุงููุญุงุฏุซุฉ
2. ูุฌุจ ุฃู ุชุธูุฑ ูู ุงููููุน ุนูุฏ ูุชุญ ุงูุนููู ููุดุงุช
3. **ูุง ุชูุฌุฏ ุฑุณุงูุฉ ุชุฃููุฏ** - ููุท ุฑุณุงูุฉ ุงููุดุฑู

### 3. ุงุฎุชุจุงุฑ ุฅููุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
1. ุฃุฑุณู ุฑุณุงูุฉ ูู ุงูุนููู ุจุนุฏ ุชูุนูู ุงููุญุงุฏุซุฉ
2. **ูุฌุจ ุฃูุง ูุฑุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู**
3. ุงููุดุฑู ูุฑุฏ ูู ุชููุฌุฑุงู

### 4. ุงุฎุชุจุงุฑ ุงูุชูุจูู
1. ุงุทูุจ ููุซู ุฎุฏูุฉ ุนููุงุก
2. ุงุถุบุท ุนูู ุฒุฑ "๐ฌ ุงูุฑุฏ ุนูู ุงูุนููู" ูู ุชููุฌุฑุงู
3. ูุฌุจ ุฃู ูุธูุฑ ููุนููู: "โ ุชู ุงุณุชูุงู ุงููุญุงุฏุซุฉ ูู ูุจู ููุซู ุฎุฏูุฉ ุงูุนููุงุก"

### 5. ุงุฎุชุจุงุฑ ุชุนุทูู ุงูุฒุฑ
1. ุงุถุบุท ุนูู ุฒุฑ "ุทูุจ ููุซู ุฎุฏูุฉ ุงูุนููุงุก"
2. ุงูุฒุฑ ูุฌุจ ุฃู ูุชุบูุฑ ุฅูู "ุชู ุงูุทูุจ - ุฌุงุฑู ุงูุงูุชุธุงุฑ"
3. ุงูุฒุฑ ูุฌุจ ุฃู ูููู ูุนุทูู (ุฑูุงุฏู)

## ๐ ุงูุฌุฏุงูู ุงููุณุชุฎุฏูุฉ

1. `telegram_chat_sessions` - ูุชุชุจุน ุงูุฌูุณุงุช ุงููุดุทุฉ
2. `chat_messages` - ูุญูุธ ุงูุฑุณุงุฆู
3. `telegram_config` - ูุฅุนุฏุงุฏุงุช ุงูุจูุช
4. `telegram_allowed_users` - ูููุณุชุฎุฏููู ุงููุตุฑุญ ููู

## โ๏ธ ููุงุญุธุงุช ูููุฉ

- Trigger ูุนูู ููุท ุนูู ุงูุฑุณุงุฆู ูู ุงูุนููุงุก (sender = 'user')
- ุงูุฅุดุนุงุฑุงุช ุชูุฑุณู ููุท ุฅุฐุง ูุงูุช ููุงู ุฌูุณุฉ ูุญุงุฏุซุฉ ูุดุทุฉ
- ูุชู ุงูุชุญูู ูู ุญุงูุฉ ุงูุฌูุณุฉ ูู 5 ุซูุงู
- Webhook URL ูุฌุจ ุฃู ูููู ุตุญูุญ ูุฅูุง ูู ูุนูู ุงููุธุงู
- ุงููุญุงุฏุซุฉ ูุธููุฉ ุชูุงูุงู - ูุง ุชูุฌุฏ ุฑุณุงุฆู ุฅุถุงููุฉ ูู ุงูุจูุช
- ุงูุฒุฑ ูุนุทูู ุจุนุฏ ุงูุทูุจ ูููุน ุงูุทูุจุงุช ุงููุชูุฑุฑุฉ
